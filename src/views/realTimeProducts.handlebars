{{!--
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Real-Time Products</title>
</head>

<body>
    <h1>Product List (Real-Time)</h1>
    <ul id="product-list">
        {{#each products}}
        <li>{{this.title}} - ${{this.price}}</li>
        {{/each}}
    </ul>

    <h2>Agregar Producto</h2>
    <input type="text" id="newTitle" placeholder="Título" required>
    <input type="number" id="newPrice" placeholder="Precio" required>
    <input type="number" id="newStock" placeholder="Stock" required>
    <button onclick="addProduct()">Agregar Producto</button>

    <h2>Eliminar Producto</h2>
    <input type="number" id="deleteId" placeholder="ID del producto" required>
    <button onclick="deleteProduct()">Eliminar Producto</button>

    <h2>Modificar Producto</h2>
    <input type="number" id="updateId" placeholder="ID del producto" required>
    <input type="text" id="updateTitle" placeholder="Nuevo título">
    <input type="number" id="updatePrice" placeholder="Nuevo precio">
    <input type="number" id="updateStock" placeholder="Nuevo stock">
    <button onclick="updateProduct()">Modificar Producto</button>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        console.log("aaa");

        socket.on('productList', (products) => {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            products.forEach(product => {
                const li = document.createElement('li');
                li.textContent = `${product.title} - $${product.price}`;
                productList.appendChild(li);
            });
        });

        function addProduct() {
            console.log("bbb");
            const title = document.getElementById('newTitle').value;
            const price = document.getElementById('newPrice').value;
            const stock = document.getElementById('newStock').value;

            if (title && price && stock) {
                const product = { title, price, stock };
                socket.emit('addProduct', product);
                document.getElementById('newTitle').value = '';
                document.getElementById('newPrice').value = '';
                document.getElementById('newStock').value = '';
            } else {
                alert('Por favor, complete todos los campos.');
            }
        }

        function deleteProduct() {

            const productId = document.getElementById('deleteId').value;
            if (productId) {
                socket.emit('deleteProduct', productId);
                document.getElementById('deleteId').value = '';
            } else {
                alert('Por favor, ingrese el ID del producto a eliminar.');
            }
        }

        function updateProduct() {
            console.log("ccc");
            const id = document.getElementById('updateId').value;
            const title = document.getElementById('updateTitle').value;
            const price = document.getElementById('updatePrice').value;
            const stock = document.getElementById('updateStock').value;

            if (id) {
                const updatedProduct = { id };
                if (title) updatedProduct.title = title;
                if (price) updatedProduct.price = price;
                if (stock) updatedProduct.stock = stock;

                socket.emit('updateProduct', updatedProduct);
                document.getElementById('updateId').value = '';
                document.getElementById('updateTitle').value = '';
                document.getElementById('updatePrice').value = '';
                document.getElementById('updateStock').value = '';
            } else {
                alert('Por favor, ingrese el ID del producto a modificar.');
            }
        }
    </script>
</body>

</html>

--}}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Real-Time Products</title>
</head>

<body>
    <h1>Product List (Real-Time)</h1>
    <ul id="product-list">
        {{#each products}}
        <li>{{this.title}} - ${{this.price}}</li>
        {{/each}}
    </ul>

    <h2>Agregar Producto</h2>
    <input type="text" id="title" placeholder="Título" required>
    <input type="text" id="description" placeholder="Description" required>
    <input type="text" id="code" placeholder="Code" required>
    <input type="number" id="price" placeholder="Precio" required>
    <input type="number" id="stock" placeholder="Stock" required>
    <input type="text" id="category" placeholder="Category" required>
    <button onclick="agregarProducto()">Agregar Producto</button>

    <h2>Eliminar Producto</h2>
    <input type="number" id="deleteId" placeholder="ID del producto" required>
    <button onclick="eliminarProducto()">Eliminar Producto</button>

    <h2>Modificar Producto</h2>
    <input type="number" id="updateId" placeholder="ID del producto" required>
    <input type="text" id="newTitle" placeholder="Nuevo título">
    <input type="number" id="newPrice" placeholder="Nuevo precio">
    <input type="number" id="newStock" placeholder="Nuevo stock">
    <button onclick="modificarProducto()">Modificar Producto</button>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/realtime.js"></script>

</body>

</html>